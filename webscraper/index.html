<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>WebScraper - Acr0nim0 Blog</title><meta name="Description" content="Acr0nim0 Blog"><meta property="og:title" content="WebScraper" />
<meta property="og:description" content="Idea The idea for this project came from a classmate of mine, Simone Zheng.
The idea is to create a scraper that goes to analyze and “study” the data on real estate sites, so as to be able to analyze the various listings, selected by area, and calculate which among the houses/apartments for sale is worth buying and which ones are better not to look at at all
Currently, all the functions that are concerned with calculating which among the listings is the best, based on average salary, IRPEF and tc , are still under development" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://francosalvucci14.github.io/webscraper/" /><meta property="og:image" content="https://francosalvucci14.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-24T12:57:30+02:00" />
<meta property="article:modified_time" content="2025-04-22T16:53:33+02:00" /><meta property="og:site_name" content="Acr0nim0 Blog" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://francosalvucci14.github.io/logo.png"/>

<meta name="twitter:title" content="WebScraper"/>
<meta name="twitter:description" content="Idea The idea for this project came from a classmate of mine, Simone Zheng.
The idea is to create a scraper that goes to analyze and “study” the data on real estate sites, so as to be able to analyze the various listings, selected by area, and calculate which among the houses/apartments for sale is worth buying and which ones are better not to look at at all
Currently, all the functions that are concerned with calculating which among the listings is the best, based on average salary, IRPEF and tc , are still under development"/>
<meta name="application-name" content="Acr0nim0 Blog">
<meta name="apple-mobile-web-app-title" content="Acr0nim0 Blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/images/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://francosalvucci14.github.io/webscraper/" /><link rel="prev" href="https://francosalvucci14.github.io/universit%C3%A0/" /><link rel="next" href="https://francosalvucci14.github.io/database-project/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "WebScraper",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/francosalvucci14.github.io\/webscraper\/"
        },"image": ["https:\/\/francosalvucci14.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "Project, WebScraper, Python, Csv","wordcount":  867 ,
        "url": "https:\/\/francosalvucci14.github.io\/webscraper\/","datePublished": "2023-04-24T12:57:30+02:00","dateModified": "2025-04-22T16:53:33+02:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Franco Salvucci","logo": "https:\/\/francosalvucci14.github.io\/images\/user.png"},"author": {
                "@type": "Person",
                "name": "Franco Salvucci"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Acr0nim0 Blog"><span class="header-title-pre"><i class=' fa-solid fa-dollar-sign' aria-hidden='true'></i></span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/aboutme"> About </a><a class="menu-item" href="https://github.com/francosalvucci14" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="Select Language">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/webscraper/" selected>English</option><option value="/it/webscraper/">Italian</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Acr0nim0 Blog"><span class="header-title-pre"><i class=' fa-solid fa-dollar-sign' aria-hidden='true'></i></span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/aboutme" title="">About</a><a class="menu-item" href="https://github.com/francosalvucci14" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/webscraper/" selected>English</option><option value="/it/webscraper/">Italian</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">WebScraper</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Franco Salvucci</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-04-24">2023-04-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;867 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;5 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#idea">Idea</a></li>
    <li><a href="#code">Code</a>
      <ul>
        <li>
          <ul>
            <li><a href="#p-s">P. S</a></li>
            <li><a href="#p-p-s">P. P. S</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="idea">Idea</h1>
<p>The idea for this project came from a classmate of mine, Simone Zheng.</p>
<p>The idea is to create a scraper that goes to analyze and “study” the data on real estate sites, so as to be able to analyze the various listings, selected by area, and calculate which among the houses/apartments for sale is worth buying and which ones are better not to look at at all</p>
<p>Currently, all the functions that are concerned with calculating which among the listings is the best, based on average salary, IRPEF and tc , are still under development</p>
<p>Currently, the scraper is only concerned with taking data from real estate sites, and calculating the average cost per area of properties.</p>
<h1 id="code">Code</h1>
<p>The scraper code is done in python.
The libraries used were :</p>
<ul>
<li>BeautifulSoup</li>
<li>Pandas</li>
<li>Requests</li>
<li>Sys</li>
<li>Getopt</li>
</ul>
<p>Functions have also been implemented to take in input, from the terminal, values that will go to set the area of interest and the type of property you want to search for</p>
<p>This was implemented in this way</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="n">arg_zone</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="n">arg_type</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="n">arg_help</span> <span class="o">=</span> <span class="s2">&#34;Help: -z &lt;zone&gt; -t &lt;type&gt;&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">opts</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">getopt</span><span class="o">.</span><span class="n">getopt</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="s2">&#34;hz:t:&#34;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&#34;help&#34;</span><span class="p">,</span> <span class="s2">&#34;zone=&#34;</span><span class="p">,</span> 
        <span class="s2">&#34;type=&#34;</span><span class="p">])</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">arg_help</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">opt</span><span class="p">,</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">opts</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&#34;-h&#34;</span><span class="p">,</span> <span class="s2">&#34;--help&#34;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">arg_help</span><span class="p">)</span>  <span class="c1"># print the help message</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&#34;-z&#34;</span><span class="p">,</span> <span class="s2">&#34;--zone&#34;</span><span class="p">):</span>
            <span class="n">arg_zone</span> <span class="o">=</span> <span class="n">arg</span>
        <span class="k">elif</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&#34;-t&#34;</span><span class="p">,</span> <span class="s2">&#34;--type&#34;</span><span class="p">):</span>
            <span class="n">arg_type</span> <span class="o">=</span> <span class="n">arg</span>

    <span class="k">if</span> <span class="n">arg_type</span> <span class="o">==</span> <span class="s2">&#34;all&#34;</span><span class="p">:</span>
        <span class="n">arg_type</span> <span class="o">=</span> <span class="s2">&#34;case&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>Inside we also find a function that goes to look up how many results have been found on the site, so we can scroll through the various pages via a for loop, which increments the <code>page=</code> value of the site.</p>
<p>The final code turns out to be this</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Importare moduli</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">getopt</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="c1"># Indirizzo sito web</span>
<span class="k">def</span> <span class="nf">FindNumber</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="n">empty_string</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
            <span class="n">empty_string</span> <span class="o">=</span> <span class="n">empty_string</span><span class="o">+</span><span class="n">m</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">empty_string</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">SearchNumberOfElements</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span><span class="n">zone</span><span class="p">):</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;https://www.immobiliare.it/vendita-</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2">/roma/</span><span class="si">{</span><span class="n">zone</span><span class="si">}</span><span class="s2">/?criterio=rilevanza&amp;noAste=1&#34;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="c1"># Analizzare documento HTML del codice sorgente con BeautifulSoup</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
    <span class="n">number_of_el</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&#34;in-searchList__title&#34;</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">number_of_el</span><span class="o">.</span><span class="n">text</span>
    <span class="n">split</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">number</span> <span class="o">=</span> <span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
    <span class="c1"># Import argument from terminal</span>
    <span class="n">arg_zone</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="n">arg_type</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="n">arg_help</span> <span class="o">=</span> <span class="s2">&#34;Help: -z &lt;zone&gt; -t &lt;type&gt;&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">opts</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">getopt</span><span class="o">.</span><span class="n">getopt</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="s2">&#34;hz:t:&#34;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&#34;help&#34;</span><span class="p">,</span> <span class="s2">&#34;zone=&#34;</span><span class="p">,</span> 
        <span class="s2">&#34;type=&#34;</span><span class="p">])</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">arg_help</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">opt</span><span class="p">,</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">opts</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&#34;-h&#34;</span><span class="p">,</span> <span class="s2">&#34;--help&#34;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">arg_help</span><span class="p">)</span>  <span class="c1"># print the help message</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&#34;-z&#34;</span><span class="p">,</span> <span class="s2">&#34;--zone&#34;</span><span class="p">):</span>
            <span class="n">arg_zone</span> <span class="o">=</span> <span class="n">arg</span>
        <span class="k">elif</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&#34;-t&#34;</span><span class="p">,</span> <span class="s2">&#34;--type&#34;</span><span class="p">):</span>
            <span class="n">arg_type</span> <span class="o">=</span> <span class="n">arg</span>

    <span class="k">if</span> <span class="n">arg_type</span> <span class="o">==</span> <span class="s2">&#34;all&#34;</span><span class="p">:</span>
        <span class="n">arg_type</span> <span class="o">=</span> <span class="s2">&#34;case&#34;</span>
    <span class="n">locali_tot</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">price_tot</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cycle</span> <span class="o">=</span> <span class="n">SearchNumberOfElements</span><span class="p">(</span><span class="n">arg_type</span><span class="p">,</span><span class="n">arg_zone</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Numeri di elementi trovati : </span><span class="si">{</span><span class="n">cycle</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
    <span class="n">pagine</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">cycle</span><span class="o">/</span><span class="mi">25</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Inizio scansione e raccolta dati&#34;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pagine</span>  <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;https://www.immobiliare.it/vendita-</span><span class="si">{</span><span class="n">arg_type</span><span class="si">}</span><span class="s2">/roma/</span><span class="si">{</span><span class="n">arg_zone</span><span class="si">}</span><span class="s2">/?criterio=rilevanza&amp;noAste=1&#34;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="c1"># Eseguire richiesta GET</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="c1"># Analizzare documento HTML del codice sorgente con BeautifulSoup</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
        <span class="c1"># Estrarre tutte le citazioni e gli autori dal documento HTML</span>
        <span class="n">locali_html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&#34;in-card__title&#34;</span><span class="p">)</span>
        <span class="n">price_html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span>
            <span class="s1">&#39;li&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&#34;nd-list__item in-feat__item in-feat__item--main in-realEstateListCard__features--main&#34;</span><span class="p">)</span>
        <span class="c1"># Raccogliere le citazioni in un elenco</span>
        <span class="n">locali</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">locale</span> <span class="ow">in</span> <span class="n">locali_html</span><span class="p">:</span>
            <span class="n">locali</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="c1"># Raccogliere gli autori in un elenco</span>
        <span class="n">prices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">price</span> <span class="ow">in</span> <span class="n">price_html</span><span class="p">:</span>
            <span class="n">prices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">price</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

        <span class="n">locali_tot</span> <span class="o">+=</span> <span class="n">locali</span>
        <span class="n">price_tot</span> <span class="o">+=</span> <span class="n">prices</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">pagine</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;https://www.immobiliare.it/vendita-</span><span class="si">{</span><span class="n">arg_type</span><span class="si">}</span><span class="s2">/roma/</span><span class="si">{</span><span class="n">arg_zone</span><span class="si">}</span><span class="s2">/?criterio=rilevanza&amp;pag=</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&amp;noAste=1&#34;</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="c1"># Eseguire richiesta GET</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="c1"># Analizzare documento HTML del codice sorgente con BeautifulSoup</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
            <span class="c1"># Estrarre tutte le citazioni e gli autori dal documento HTML</span>
            <span class="n">locali_html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&#34;in-card__title&#34;</span><span class="p">)</span>
            <span class="n">price_html</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span>
                <span class="s1">&#39;li&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&#34;nd-list__item in-feat__item in-feat__item--main in-realEstateListCard__features--main&#34;</span><span class="p">)</span>
            <span class="n">locali</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">locale</span> <span class="ow">in</span> <span class="n">locali_html</span><span class="p">:</span>
                <span class="n">locali</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="n">prices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">price</span> <span class="ow">in</span> <span class="n">price_html</span><span class="p">:</span>
                <span class="n">prices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">price</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

            <span class="n">locali_tot</span> <span class="o">+=</span> <span class="n">locali</span>
            <span class="n">price_tot</span> <span class="o">+=</span> <span class="n">prices</span>

    <span class="k">return</span> <span class="n">locali_tot</span><span class="p">,</span> <span class="n">price_tot</span><span class="p">,</span><span class="n">arg_type</span>


<span class="n">locali</span><span class="p">,</span> <span class="n">prezzi</span><span class="p">,</span><span class="n">tipo_immobile</span> <span class="o">=</span> <span class="n">search</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
<span class="n">somma_prezzi</span><span class="p">,</span> <span class="n">count_locali</span><span class="p">,</span> <span class="n">media_prezzo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Elaboro csv personalizzato&#34;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Locali&#39;</span><span class="p">:</span> <span class="n">locali</span><span class="p">,</span> <span class="s1">&#39;Prezzi&#39;</span><span class="p">:</span> <span class="n">prezzi</span><span class="p">,</span>
                  <span class="s1">&#39;Media prezzo:&#39;</span><span class="p">:</span> <span class="n">media_prezzo</span><span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Immobiliare_</span><span class="si">{</span><span class="n">tipo_immobile</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Fine elaborazione.&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="p-s">P. S</h3>
<p>Small reminder:
Please remember that scraping data online is completely LEGAL, the imporatate thing is that you have to stay enter a certain range of scans per day, but otherwise it is all legal since since a certain data is posted on a website, any person can access it without any problem.</p>
<p>Thank you 😄</p>
<h3 id="p-p-s">P. P. S</h3>
<p>The scraper is not even at its beta version, I dare say it&rsquo;s in the gamma version yet 😄, so any criticism/modification/advice is welcome</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2025-04-22&nbsp;<a class="git-hash" href="https://github.com/dillonzq/LoveIt/commit/9c97e080a4246a45bd16998764aa50d258ac9f73" target="_blank" title="commit by francosalvucci14(francosalvucci14@gmail.com) 9c97e080a4246a45bd16998764aa50d258ac9f73: Update">
                                    <i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>9c97e08</a></span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/webscraper/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://francosalvucci14.github.io/webscraper/" data-title="WebScraper" data-via="Salvucci2Franco" data-hashtags="Project,WebScraper,Python,Csv"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://francosalvucci14.github.io/webscraper/" data-hashtag="Project"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://francosalvucci14.github.io/webscraper/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on WhatsApp" data-sharer="whatsapp" data-url="https://francosalvucci14.github.io/webscraper/" data-title="WebScraper" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="https://francosalvucci14.github.io/webscraper/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/project/">Project</a>,&nbsp;<a href="/tags/webscraper/">WebScraper</a>,&nbsp;<a href="/tags/python/">Python</a>,&nbsp;<a href="/tags/csv/">Csv</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/universit%C3%A0/" class="prev" rel="prev" title="University"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>University</a>
            <a href="/database-project/" class="next" rel="next" title="DataBase Project">DataBase Project<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="telegram-comments" class="comment"><script type="text/javascript" src="https://comments.app/js/widget.js?3" defer data-comments-app-website="" data-limit="5" data-colorful="1"></script><noscript>
                    Please enable JavaScript to view the comments powered by <a href="https://comments.app/">Telegram Comments</a>.
                </noscript>
            </div></div><script src="https://utteranc.es/client.js"
        repo="francosalvucci14/francosalvucci14.github.io"
        issue-term="pathname"
        label="Insert comment here..."
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.92.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2025</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Franco Salvucci</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"data":{"id-1":"Franco Salvucci","id-2":"Franco Salvucci"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
